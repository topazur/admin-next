import{P as y,k as b,R as p}from"./index.js";import{d as c,r as d,o as F,aU as v,p as w,h as u,V as C,bI as A,bJ as E,N,i as D,b2 as s,y as l,b3 as x,b1 as g,G as V,B as m,A as B}from"./vendor.js";const I="_full_1abhi_1";var S={full:I};const h=()=>D("configs");var M=c({components:{ParallaxButtonVue:y},setup(){const n=d(!1);F(()=>{const o=new Image;o.src=b,o.onload=i=>{n.value=!0}});const e=v({});F(async()=>{const o=await p.api.init.configs.default.get();Object.assign(e,o)}),w("configs",e);const t=d(0);return()=>u("div",{class:S.full},n.value&&u("div",{class:"bg-image",style:`--bg: url(${b})`}),u(C,{title:"\u521D\u59CB\u5316",class:"modal-card sm m-auto form-card"},u(A,{size:"small",current:t.value},u(E,{status:t.value>0?"finish":"process",title:"\u7AD9\u70B9\u8BBE\u7F6E",description:"\u5148\u8BBE\u7F6E\u4E00\u4E0B\u7AD9\u70B9\u76F8\u5173\u914D\u7F6E\u5427"}),u(E,{status:t.value>1?"finish":t.value<1?"wait":"process",title:"\u4E3B\u4EBA\u4FE1\u606F",description:"\u8BF7\u544A\u8BC9\u4F60\u7684\u540D\u5B57"}),u(E,{status:t.value>2?"finish":t.value<2?"wait":"process",title:"(\u0E51\u2022\u0300\u3142\u2022\u0301)\u0648\u2727",description:"\u4E00\u5207\u5C31\u7EEA\u4E86"})),u("div",{class:"mt-[3.5rem]"},JSON.stringify(e)==="{}"?u("div",{class:"text-center py-4"},u(N,null)):u([q,k,j][t.value],{onNext(){t.value++}}))))}});const f={onNext:{type:Function,required:!0}},q=c({props:f,setup(n){const e=h(),t=d(e?.seo?.title||""),o=d(e?.seo?.keywords),i=d(e?.seo?.description||""),a=v({adminUrl:location.origin+"/qaqdmin",serverUrl:location.origin+"/api/v2",webUrl:location.origin,wsUrl:location.origin}),U=async()=>{await Promise.all([p.api.init.configs("seo").patch({data:{title:t.value,keywords:o.value,description:i.value}}),p.api.init.configs("url").patch({data:{...a}})]),n.onNext()};return()=>u(g,null,u(s,{label:"\u7AD9\u70B9\u6807\u9898",required:!0},u(l,{value:t.value,onUpdateValue:r=>void(t.value=r)})),u(s,{label:"\u7AD9\u70B9\u63CF\u8FF0",required:!0},u(l,{value:i.value,onUpdateValue:r=>void(i.value=r)})),u(s,{label:"\u5173\u952E\u5B57"},u(x,{value:o.value,onUpdateValue:r=>void(o.value=r)})),u(s,{label:"\u524D\u7AEF\u5730\u5740"},u(l,{value:a.webUrl,onInput:r=>void(a.webUrl=r)})),u(s,{label:"API \u5730\u5740"},u(l,{value:a.serverUrl,onInput:r=>void(a.serverUrl=r)})),u(s,{label:"\u540E\u53F0\u5730\u5740"},u(l,{value:a.adminUrl,onInput:r=>void(a.adminUrl=r)})),u(s,{label:"Gateway \u5730\u5740"},u(l,{value:a.wsUrl,onInput:r=>void(a.wsUrl=r)})),u(m,{justify:"end"},u(B,{onClick:U,round:!0,type:"primary"},"\u4E0B\u4E00\u6B65")))}}),k=c({props:f,setup(n){const e=v({}),t=d(""),o=V(),i=async()=>{if(t.value!==e.password){o.error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4");return}await p.api.user.register.post({data:{...e}}),n.onNext()};return()=>u(g,null,u(s,{label:"\u4F60\u7684\u540D\u5B57 (\u767B\u5F55\u51ED\u8BC1)",required:!0},u(l,{value:e.username,onUpdateValue:a=>{e.username=a}})),u(s,{label:"\u6635\u79F0"},u(l,{value:e.name,onUpdateValue:a=>{e.name=a}})),u(s,{label:"\u90AE\u7BB1",required:!0},u(l,{value:e.mail,onUpdateValue:a=>{e.mail=a}})),u(s,{label:"\u5BC6\u7801",required:!0},u(l,{value:e.password,type:"password",onUpdateValue:a=>{e.password=a}})),u(s,{label:"\u786E\u8BA4\u5BC6\u7801",required:!0},u(l,{value:t.value,type:"password",onUpdateValue:a=>{t.value=a}})),u(s,{label:"\u4E2A\u4EBA\u9996\u9875"},u(l,{value:e.url,onUpdateValue:a=>{e.url=a}})),u(s,{label:"\u5934\u50CF"},u(l,{value:e.avatar,onUpdateValue:a=>{e.avatar=a}})),u(s,{label:"\u4E2A\u4EBA\u4ECB\u7ECD"},u(l,{value:e.introduce,onUpdateValue:a=>{e.introduce=a}})),u(m,{justify:"end"},u(B,{disabled:!e.username||!e.username||!e.password||!t.value,onClick:i,round:!0,type:"primary"},"\u4E0B\u4E00\u6B65")))}}),j=c({props:f,setup(n){return()=>u(m,{class:"text-center",vertical:!0},u("span",{class:"text-base"},"\u4F60\u5DF2\u7ECF\u5B8C\u6210\u4E86\u6240\u6709\u7684\u6B65\u9AA4\uFF0C\u5E72\u5F97\u6F02\u4EAE\u3002"),u(B,{type:"primary",round:!0,onClick:()=>{localStorage.setItem("to-setting","true"),location.reload()}},"LINK START"))}});export{M as default};
