import{A as w}from"./Add12Filled.js";import{D}from"./Delete16Regular.js";import{T as B}from"./index3.js";import{R as k}from"./relative-time.js";import{u as A}from"./use-table.js";import{d,G as T,z as C,af as E,w as R,o as j,aT as b,h as e,aV as c,A as p,B as L,aW as M,F as N}from"./vendor.js";import{H as m}from"./rounded-button.js";import{R as i,a as S}from"./index.js";const I=d({name:"SayList",setup(z,P){const{checkedRowKeys:s,data:y,pager:n,loading:g,fetchDataFn:f}=A((a,t)=>async(h=r.query.page||1,x=30)=>{const l=await i.api.says.get({params:{page:h,size:x,select:"title text _id id created modified author source"}});a.value=l.data,t.value=l.pagination}),o=T(),v=C(),r=E(),u=f;R(()=>r.query.page,async a=>{await u(a)}),j(async()=>{await u()});const F=d({setup(){const a=b([{type:"selection",options:["none","all"]},{title:"\u521B\u5EFA\u4E8E",key:"created",width:100,render(t){return e(c,{to:"/says/edit?id="+t.id},e(k,{time:t.created}))}},{title:"\u5185\u5BB9",key:"text"},{title:"\u4F5C\u8005",key:"author"},{title:"\u6765\u6E90",key:"source"},{title:"\u64CD\u4F5C",fixed:"right",key:"id",width:130,render(t){return e(L,{wrap:!1},e(c,{to:"/says/edit?id="+t.id},e(p,{text:!0,type:"primary",size:"tiny"},"\u7F16\u8F91")),e(M,{positiveText:"\u53D6\u6D88",negativeText:"\u5220\u9664",onNegativeClick:async()=>{await i.api.says(t.id).delete(),o.success("\u5220\u9664\u6210\u529F"),await u(n.value.currentPage)}},{trigger:()=>e(p,{text:!0,type:"error",size:"tiny"},"\u79FB\u9664"),default:()=>e("span",{style:{maxWidth:"12rem"}},"\u786E\u5B9A\u8981\u5220\u9664\u201C",t.text,"\u201D ?")}))}}]);return()=>e(B,{loading:g.value,columns:a,data:y,onFetchData:u,pager:n,onUpdateCheckedRowKeys:t=>{s.value=t}})}});return()=>e(S,null,{actions:()=>e(N,null,e(m,{variant:"error",disabled:s.value.length==0,onClick:()=>{v.warning({title:"\u8B66\u544A",content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\uFF1F",positiveText:"\u786E\u5B9A",negativeText:"\u4E0D\u786E\u5B9A",onPositiveClick:async()=>{for(const a of s.value)await i.api.says(a).delete();s.value.length=0,o.success("\u5220\u9664\u6210\u529F"),await u()}})},icon:e(D,null)}),e(m,{to:"/says/edit",icon:e(w,null)})),default:()=>e(F,null)})}});export{I as default};
