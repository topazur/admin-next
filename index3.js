import{u as K,U}from"./index.js";import{d as S,u as k,ag as j,r as y,aU as q,w as C,aY as F,h as P,aZ as x}from"./vendor.js";var B={"table-row":"_table-row_1brqz_3"};const T=B["table-row"],W=S({props:{data:{type:Object,required:!0},noPagination:{type:Boolean,default:!1},pager:{type:Object,required:!1},onUpdateCheckedRowKeys:{type:Function,default:new Function},onUpdateSorter:{type:Function,default:new Function},onFetchData:{type:Function,required:!1},columns:{type:Array,required:!0},nTableProps:{type:Object,default:new Object},maxWidth:{type:Number},loading:{type:Boolean,default:!1},checkedRowKey:{type:String,default:"id"}},setup(d){const{data:l,noPagination:h=!1,pager:o,onUpdateCheckedRowKeys:v,onUpdateSorter:w,nTableProps:g,columns:u,onFetchData:i,checkedRowKey:b="id",maxWidth:m=1200}=d,O=k(),c=j(),p=y([]),n=q({sortBy:"",sortOrder:0}),r=y(!0),R=C(()=>l.value,e=>{r.value=!1,R()});F((e,f,a)=>{r.value=!0,a(),r.value=!1});const s=K(U);return()=>P(x,{...g,loading:d.loading??r.value,remote:!0,scrollX:Math.max(s.contentInsetWidth.value,m),pagination:h?void 0:o&&{page:o.value.currentPage,pageSize:o.value.size,pageCount:o.value.totalPage,showQuickJumper:!0,pageSlot:s.viewport.value.mobile?s.contentInsetWidth.value<400?2:3:void 0,onChange:async e=>{O.push({query:{...c.query,page:e},path:c.path})}},bordered:!1,data:l.value,rowClassName:()=>T,checkedRowKeys:p.value,rowKey:e=>e[b],onUpdateCheckedRowKeys:e=>{p.value=e,v?.(e)},onUpdateSorter:async e=>{if(!e)return;u.forEach(t=>{if("sortOrder"in t&&t.sortOrder!==void 0){if(!e){t.sortOrder=!1;return}t.key===e.columnKey?t.sortOrder=e.order:t.sortOrder=!1}});const{columnKey:f,order:a}=e;n.sortBy=a===!1?"":f.toString()||"",n.sortOrder=a?{descend:-1,ascend:1}[a]:1,w?.(n,e),i&&await i()},columns:u})}});export{W as T,T as t};
